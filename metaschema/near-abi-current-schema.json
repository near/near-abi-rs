{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AbiRoot",
  "description": "Contract ABI.",
  "type": "object",
  "properties": {
    "body": {
      "description": "Core ABI information (functions and types).",
      "$ref": "#/$defs/AbiBody"
    },
    "metadata": {
      "description": "Metadata information about the contract.",
      "$ref": "#/$defs/AbiMetadata"
    },
    "schema_version": {
      "description": "Semver of the ABI schema format.",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "required": [
    "schema_version",
    "metadata",
    "body"
  ],
  "$defs": {
    "AbiBody": {
      "description": "Core ABI information.",
      "type": "object",
      "properties": {
        "functions": {
          "description": "ABIs of all contract's functions.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/AbiFunction"
          }
        },
        "root_schema": {
          "description": "Root JSON Schema containing all types referenced in the functions.",
          "$ref": "#/$defs/Schema"
        }
      },
      "additionalProperties": false,
      "required": [
        "functions",
        "root_schema"
      ]
    },
    "AbiBorshParameter": {
      "description": "Information about a single named Borsh function parameter.",
      "type": "object",
      "properties": {
        "name": {
          "description": "Parameter name (e.g. `p1` in `fn foo(p1: u32) {}`).",
          "type": "string"
        },
        "type_schema": {
          "description": "Inline Borsh schema that represents this type."
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "type_schema"
      ]
    },
    "AbiFunction": {
      "description": "ABI of a single function.",
      "type": "object",
      "properties": {
        "callbacks": {
          "description": "Type identifiers of the callbacks of the function.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/AbiType"
          }
        },
        "callbacks_vec": {
          "description": "Type identifier of the vararg callbacks of the function.",
          "anyOf": [
            {
              "$ref": "#/$defs/AbiType"
            },
            {
              "type": "null"
            }
          ]
        },
        "doc": {
          "description": "Human-readable documentation parsed from the source file.",
          "type": [
            "string",
            "null"
          ]
        },
        "kind": {
          "description": "Function kind that regulates whether the function has to be invoked from a transaction.",
          "$ref": "#/$defs/AbiFunctionKind"
        },
        "modifiers": {
          "description": "List of modifiers affecting the function.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/AbiFunctionModifier"
          }
        },
        "name": {
          "type": "string"
        },
        "params": {
          "description": "Type identifiers of the function parameters.",
          "$ref": "#/$defs/AbiParameters"
        },
        "result": {
          "description": "Return type identifier.",
          "anyOf": [
            {
              "$ref": "#/$defs/AbiType"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "kind"
      ]
    },
    "AbiFunctionKind": {
      "description": "Function kind regulates whether this function's invocation requires a transaction (so-called\ncall functions) or not (view functions).",
      "type": "string",
      "enum": [
        "view",
        "call"
      ]
    },
    "AbiFunctionModifier": {
      "description": "Function can have multiple modifiers that can change its semantics.",
      "oneOf": [
        {
          "description": "Init functions can be used to initialize the state of the contract.",
          "type": "string",
          "const": "init"
        },
        {
          "description": "Private functions can only be called from the contract containing them. Usually, when a\ncontract has to have a callback for a remote cross-contract call, this callback method\nshould only be called by the contract itself.",
          "type": "string",
          "const": "private"
        },
        {
          "description": "Payable functions can accept token transfer together with the function call.\nThis is done so that contracts can define a fee in tokens that needs to be payed when\nthey are used.",
          "type": "string",
          "const": "payable"
        }
      ]
    },
    "AbiJsonParameter": {
      "description": "Information about a single named JSON function parameter.",
      "type": "object",
      "properties": {
        "name": {
          "description": "Parameter name (e.g. `p1` in `fn foo(p1: u32) {}`).",
          "type": "string"
        },
        "type_schema": {
          "description": "JSON Subschema that represents this type (can be an inline primitive, a reference to the root schema and a few other corner-case things).",
          "$ref": "#/$defs/Schema"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "type_schema"
      ]
    },
    "AbiMetadata": {
      "type": "object",
      "properties": {
        "authors": {
          "description": "The authors of the smart contract.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "build": {
          "description": "The information about how this contract was built.",
          "anyOf": [
            {
              "$ref": "#/$defs/BuildInfo"
            },
            {
              "type": "null"
            }
          ]
        },
        "name": {
          "description": "The name of the smart contract.",
          "type": [
            "string",
            "null"
          ]
        },
        "version": {
          "description": "The version of the smart contract.",
          "type": [
            "string",
            "null"
          ]
        },
        "wasm_hash": {
          "description": "The SHA-256 hash of the contract WASM code in Base58 format.",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "additionalProperties": {
        "type": "string"
      }
    },
    "AbiParameters": {
      "description": "A list of function parameters sharing the same serialization type.",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "args": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/AbiJsonParameter"
              }
            },
            "serialization_type": {
              "type": "string",
              "const": "json"
            }
          },
          "additionalProperties": false,
          "required": [
            "serialization_type",
            "args"
          ]
        },
        {
          "type": "object",
          "properties": {
            "args": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/AbiBorshParameter"
              }
            },
            "serialization_type": {
              "type": "string",
              "const": "borsh"
            }
          },
          "additionalProperties": false,
          "required": [
            "serialization_type",
            "args"
          ]
        }
      ]
    },
    "AbiType": {
      "description": "Information about a single type (e.g. return type).",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "serialization_type": {
              "type": "string",
              "enum": [
                "json"
              ]
            },
            "type_schema": {
              "$ref": "#/$defs/Schema"
            }
          },
          "additionalProperties": false,
          "required": [
            "serialization_type",
            "type_schema"
          ]
        },
        {
          "type": "object",
          "properties": {
            "serialization_type": {
              "type": "string",
              "enum": [
                "borsh"
              ]
            },
            "type_schema": {}
          },
          "additionalProperties": false,
          "required": [
            "serialization_type",
            "type_schema"
          ]
        }
      ]
    },
    "BuildInfo": {
      "type": "object",
      "properties": {
        "builder": {
          "description": "The build tool (versioned) that was used to build the contract.",
          "type": "string"
        },
        "compiler": {
          "description": "The compiler (versioned) that was used to build the contract.",
          "type": "string"
        },
        "image": {
          "description": "The docker image (versioned) where the contract was built.",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "compiler",
        "builder"
      ]
    },
    "Schema": {
      "type": [
        "object",
        "boolean"
      ]
    }
  }
}
